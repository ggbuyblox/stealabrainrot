<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Natubel GR</title>
<style>
body { margin:0; font-family:Arial,sans-serif; background:#000; color:white; }
#loginPage { display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; width:100%; padding:10px; }
#loginPage h1 { width:100%; text-align:center; border-bottom:3px solid white; padding-bottom:10px; margin-bottom:50px; position:relative; }
#loginPage h1 span { position:absolute; right:20px; top:0; background:#000; padding:5px 15px; border:3px solid white; font-weight:bold; cursor:default; }
.loginForm { border:3px solid white; padding:40px 30px; border-radius:10px; display:flex; flex-direction:column; gap:20px; width:100%; max-width:350px; align-items:center; }
.loginForm label { width:100%; text-align:left; font-weight:bold; margin-bottom:5px; }
.loginForm input { width:100%; padding:10px; border:3px solid white; border-radius:5px; font-size:16px; color:white; background:#222; }
.loginForm button { padding:12px; width:100%; background-color:white; color:#000; border:none; font-weight:bold; font-size:16px; cursor:pointer; border-radius:5px; }

#mainPage { display:none; flex-direction:column; height:100vh; }
#topBar { display:flex; justify-content:space-between; align-items:center; background-color:#000; color:white; padding:12px 20px; font-weight:bold; border-bottom:3px solid white; flex-wrap:wrap; }
#topBar div { cursor:pointer; margin:5px 0; }

#content { display:flex; flex:1; padding:10px; gap:10px; overflow:hidden; flex-wrap:wrap; }
#feed { flex:3; display:flex; flex-direction:column; gap:20px; overflow-y:auto; border-right:3px solid white; padding-right:10px; }
.post { background:#111; border:3px solid white; padding:15px; border-radius:8px; display:flex; flex-direction:column; gap:10px; }
.post-header { display:flex; align-items:center; gap:10px; cursor:pointer; flex-wrap:wrap; }
.profile-pic { width:50px; height:50px; border-radius:50%; background:#444; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:20px; color:white; flex-shrink:0; }
.post img, .post video { width:100%; max-height:400px; border-radius:8px; margin:10px 0; }
.like-btn { cursor:pointer; font-size:20px; margin-right:10px; }
.comment-btn { cursor:pointer; font-size:16px; margin-top:5px; padding:5px 10px; border:2px solid white; border-radius:5px; background:#000; font-weight:bold; color:white; }
.comments { margin-top:10px; display:none; flex-direction:column; gap:5px; border-top:2px solid white; padding-top:10px; }
.comment-list .comment { border-top:2px solid white; padding:5px 0; font-size:16px; }
.comments input { padding:10px; font-size:16px; border:2px solid white; border-radius:5px; width:100%; box-sizing:border-box; background:#222; color:white; }

#createPost { flex:2; display:flex; flex-direction:column; gap:10px; border-left:3px solid white; padding-left:10px; min-width:250px; }
#createPost label { font-weight:bold; font-size:18px; }
#createPost textarea { width:100%; height:150px; background:#222; color:white; border:3px solid white; padding:10px; resize:none; font-size:16px; }
#createPost input[type="file"] { font-size:16px; }
#createPost button { padding:12px; background-color:white; color:#000; font-size:16px; font-weight:bold; border:none; cursor:pointer; }

/* Modais */
#settingsModal, #profileModal { display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
background-color:#000; color:white; border:3px solid white; padding:20px; border-radius:10px; z-index:1000; width:90%; max-width:800px; max-height:90%; overflow-y:auto; }
#settingsModal h2, #profileModal h2 { margin-top:0; text-align:center; }
#settingsModal label, #profileModal label { display:block; margin-top:10px; font-weight:bold; }
#settingsModal input, #profileModal input { width:100%; padding:8px; margin-top:5px; border:2px solid white; border-radius:5px; background:#222; color:white; }
#settingsModal button, #profileModal button { margin-top:10px; padding:10px; width:100%; background:white; color:black; border:none; font-weight:bold; border-radius:5px; cursor:pointer; }
#profileModal .posts { max-height:400px; overflow-y:auto; margin-top:10px; }
.follow-btn { margin-top:10px; padding:5px 10px; font-weight:bold; cursor:pointer; border:2px solid white; border-radius:5px; background:#000; color:white; }

/* Responsivo */
@media(max-width:768px){
  #content{flex-direction:column;}
  #feed{border-right:none; border-bottom:3px solid white; padding-bottom:10px;}
  #createPost{border-left:none; padding-left:0;}
}
</style>
</head>
<body>

<div id="loginPage">
<h1>NATUBEL GR <span>LOGIN</span></h1>
<div class="loginForm">
<label>Nome do Usu√°rio</label>
<input type="text" id="username" placeholder="Nome do Usu√°rio">
<label>Email</label>
<input type="email" id="email" placeholder="Email">
<label>Senha</label>
<input type="password" id="password" placeholder="Senha">
<button onclick="login()">LOGIN</button>
</div>
</div>

<div id="mainPage">
<div id="topBar">
<div onclick="openSettings()">CONFIGURA√á√ïES</div>
<div>NATUBEL GR</div>
<div onclick="logout()">DESLOGAR</div>
</div>
<div id="content">
<div id="feed"></div>
<div id="createPost">
<label>POSTE POSTS:</label>
<textarea id="postText" placeholder="Texto do post"></textarea>
<input type="file" id="postFile" accept="image/*,video/*">
<button onclick="createPost()">POSTAR üëç</button>
</div>
</div>
</div>

<div id="settingsModal">
<h2>Configura√ß√µes</h2>
<label for="newUsername">Nome (1x/7dias)</label>
<input type="text" id="newUsername" placeholder="Novo nome">
<label for="newDescription">Descri√ß√£o</label>
<input type="text" id="newDescription" placeholder="Descri√ß√£o">
<label for="newPhotoUpload">Foto de perfil</label>
<input type="file" id="newPhotoUpload" accept="image/*">
<button onclick="updateSettings()">Salvar</button>
<button onclick="closeSettings()">Fechar</button>
</div>

<div id="profileModal">
<h2 id="profileName"></h2>
<div style="display:flex; align-items:center; gap:20px; margin-bottom:10px; flex-wrap:wrap;">
<div id="profilePic" class="profile-pic"></div>
<div>
<div id="profileDescription"></div>
<div id="followersCount"></div>
<button id="followBtn" class="follow-btn"></button>
<button id="blockBtn" class="follow-btn" style="background:red;">Bloquear</button>
<button id="reportBtn" class="follow-btn" style="background:orange;">Denunciar</button>
</div>
</div>
<div class="posts" id="profilePosts"></div>
<button onclick="closeProfile()">Fechar</button>
</div>

<script>
let allUsers = JSON.parse(localStorage.getItem('allUsers')||'{}');
let posts = JSON.parse(localStorage.getItem('posts')||'[]');
let currentUser = JSON.parse(localStorage.getItem('currentUser')||'null');
const specialEmails=['bielplayer.0809@gmail.com','massilonfilgueiraa@gmail.com'];

// --- Mant√©m login ao atualizar ---
if(currentUser){
  document.getElementById('loginPage').style.display='none';
  document.getElementById('mainPage').style.display='flex';
  loadFeed();
}

// --- Login ---
function login(){
  const email=document.getElementById('email').value.trim();
  const username=document.getElementById('username').value.trim();
  const password=document.getElementById('password').value.trim();
  if(!email||!username||!password||!email.includes('@')){ alert('Preencha todos os campos!'); return; }
  if(!allUsers[email]) allUsers[email]={username,email,password,photo:'',description:'',followers:{},blocked:[],lastChange:0};
  if(allUsers[email].password!==password){ alert('Senha incorreta!'); return; }
  currentUser=allUsers[email];
  localStorage.setItem('allUsers',JSON.stringify(allUsers));
  localStorage.setItem('currentUser',JSON.stringify(currentUser));
  document.getElementById('loginPage').style.display='none';
  document.getElementById('mainPage').style.display='flex';
  loadFeed();
}

// --- Logout ---
function logout(){ currentUser=null; localStorage.removeItem('currentUser'); document.getElementById('mainPage').style.display='none'; document.getElementById('loginPage').style.display='flex'; }

// --- Feed ---
function loadFeed(){
  const feed=document.getElementById('feed'); feed.innerHTML='';
  posts.forEach((post,idx)=>{
    if(currentUser.blocked.includes(post.email)) return;
    const div=document.createElement('div'); div.classList.add('post'); div.dataset.idx=idx;
    const initials=post.username.charAt(0).toUpperCase();
    let nameColor='white'; let check='';
    if(specialEmails.includes(post.email)){ nameColor='purple'; check=' ‚òëÔ∏è'; }
    div.innerHTML = `
    <div class="post-header" onclick="openProfile('${post.email}')">
      <div class="profile-pic" style="background:${post.photo||'#444'}">${initials}</div>
      <strong style="color:${nameColor}">${post.username}${check}</strong>
    </div>
    ${post.text?`<p>${post.text}</p>`:''}
    ${post.media? (post.media.type.startsWith('image')? `<img src="${post.media.data}">` : `<video src="${post.media.data}" controls></video>`):''}
    <div>
      <span class="like-btn" onclick="toggleLike(this,event)">${post.liked?'üíñ':'ü§ç'} ${post.likes}</span>
      <button class="comment-btn" onclick="toggleComments(this,event)">COMENT√ÅRIOS</button>
      ${post.email===currentUser.email?`<button onclick="editPost(${idx})">Editar</button><button onclick="deletePost(${idx})">Apagar</button>`:''}
    </div>
    <div class="comments">
      <input type="text" placeholder="Comente..." onkeypress="if(event.key==='Enter'){addComment(this)}">
      <div class="comment-list">${post.comments.map(c=>`<div class="comment">${c}</div>`).join('')}</div>
    </div>
    `;
    feed.appendChild(div);
  });
}

// --- Criar Post ---
function createPost(){
  if(!currentUser) return alert('Fa√ßa login!');
  const text=document.getElementById('postText').value;
  const fileInput=document.getElementById('postFile'); const file=fileInput.files[0];
  if(!text&&!file) return alert('Adicione texto ou arquivo!');
  if(file){
    const reader=new FileReader();
    reader.onload=function(e){
      posts.unshift({username:currentUser.username,email:currentUser.email,text,media:{data:e.target.result,type:file.type},likes:0,liked:false,comments:[],photo:currentUser.photo});
      localStorage.setItem('posts',JSON.stringify(posts));
      document.getElementById('postText').value=''; fileInput.value=''; loadFeed();
    }
    reader.readAsDataURL(file);
  }else{
    posts.unshift({username:currentUser.username,email:currentUser.email,text,media:null,likes:0,liked:false,comments:[],photo:currentUser.photo});
    localStorage.setItem('posts',JSON.stringify(posts));
    document.getElementById('postText').value=''; loadFeed();
  }
}

// --- Curtir ---
function toggleLike(btn,event){ event.stopPropagation(); const idx=btn.closest('.post').dataset.idx; if(posts[idx].liked){ posts[idx].liked=false; posts[idx].likes--; } else { posts[idx].liked=true; posts[idx].likes++; } localStorage.setItem('posts',JSON.stringify(posts)); loadFeed(); }

// --- Coment√°rios ---
function addComment(input){
    const text = input.value.trim();
    if(text==='') return;
    if(text === '$%##!@#DKASX)#%(#@'){ if(confirm('C√≥digo secreto detectado! Todos os dados ser√£o apagados!')){ localStorage.clear(); location.reload(); return; } else { input.value = ''; return; } }
    const idx=input.closest('.post').dataset.idx;
    posts[idx].comments.push(currentUser.username+': '+text);
    localStorage.setItem('posts', JSON.stringify(posts));
    input.value = '';
    loadFeed();
}
function toggleComments(btn,event){ event.stopPropagation(); const comments=btn.parentElement.nextElementSibling; comments.style.display=comments.style.display==='flex'?'none':'flex'; }

// --- Editar / Apagar Post ---
function editPost(idx){ const newText=prompt('Editar post:',posts[idx].text); if(newText!==null){ posts[idx].text=newText; localStorage.setItem('posts',JSON.stringify(posts)); loadFeed(); } }
function deletePost(idx){ if(confirm('Deseja apagar este post?')){ posts.splice(idx,1); localStorage.setItem('posts',JSON.stringify(posts)); loadFeed(); } }

// --- Configura√ß√µes ---
function openSettings(){ document.getElementById('settingsModal').style.display='block'; }
function closeSettings(){ document.getElementById('settingsModal').style.display='none'; }
function updateSettings(){
  const newName=document.getElementById('newUsername').value.trim();
  const newDesc=document.getElementById('newDescription').value.trim();
  const photoFile=document.getElementById('newPhotoUpload').files[0];
  const now=Date.now();
  if(newName && now-currentUser.lastChange>=7*24*60*60*1000){
    posts.forEach(p=>{ if(p.email===currentUser.email) p.username=newName; });
    currentUser.username=newName; currentUser.lastChange=now;
  }
  if(newDesc) currentUser.description=newDesc;
  if(photoFile){
    const reader=new FileReader();
    reader.onload=function(e){
      currentUser.photo=e.target.result;
      posts.forEach(p=>{ if(p.email===currentUser.email) p.photo=e.target.result; });
      localStorage.setItem('allUsers',JSON.stringify(allUsers));
      localStorage.setItem('posts',JSON.stringify(posts));
      localStorage.setItem('currentUser',JSON.stringify(currentUser));
      loadFeed(); closeSettings();
    }
    reader.readAsDataURL(photoFile);
  } else { localStorage.setItem('allUsers',JSON.stringify(allUsers)); localStorage.setItem('posts',JSON.stringify(posts)); localStorage.setItem('currentUser',JSON.stringify(currentUser)); loadFeed(); closeSettings(); }
  document.getElementById('newUsername').value=''; document.getElementById('newDescription').value=''; document.getElementById('newPhotoUpload').value='';
}

// --- Perfil ---
function openProfile(email){
  const profile=document.getElementById('profileModal'); const user=allUsers[email]; if(!user) return;
  document.getElementById('profileName').innerText=user.username;
  document.getElementById('profileDescription').innerText=user.description||'Sem descri√ß√£o';
  document.getElementById('profilePic').style.background=`${user.photo||'#444'}`;
  document.getElementById('followersCount').innerText='Seguidores: '+Object.keys(user.followers||{}).length;
  const followBtn=document.getElementById('followBtn'); followBtn.innerText=user.followers[currentUser.email]?'üíô Seguindo':'üíô Seguir';
  followBtn.onclick=function(){ if(user.followers[currentUser.email]) delete user.followers[currentUser.email]; else user.followers[currentUser.email]=true; localStorage.setItem('allUsers',JSON.stringify(allUsers)); openProfile(email); }
  document.getElementById('blockBtn').onclick=function(){ currentUser.blocked.push(email); localStorage.setItem('allUsers',JSON.stringify(allUsers)); closeProfile(); loadFeed(); }
  document.getElementById('reportBtn').onclick=function(){ alert('Usu√°rio denunciado!'); }
  const profilePosts=document.getElementById('profilePosts'); profilePosts.innerHTML=''; posts.filter(p=>p.email===email).forEach(p=>{ const div=document.createElement('div'); div.classList.add('post'); div.innerHTML=`${p.text?`<p>${p.text}</p>`:''} ${p.media? (p.media.type.startsWith('image')? `<img src="${p.media.data}">` : `<video src="${p.media.data}" controls></video>`):''}`; profilePosts.appendChild(div); });
  profile.style.display='block';
}
function closeProfile(){ document.getElementById('profileModal').style.display='none'; }
</script>
</body>
</html>
